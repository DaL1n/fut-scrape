#!/usr/bin/env bash
cat data/raw_data.json | jq -c '.items[] | {player_id: .id, rating, name, common_name: .commonName, first_name: .firstName, last_name: .lastName, position, composure, play_style: .playStyle, heigth, weight, birthdate, age, acceleration, aggression, agility, balance, ballcontrol, foot, skill_moves: .skillMoves, crossing, curve, dribbling, finishing, freekickaccuracy, gkdiving, gkhandling, gkkicking, gkpositioning, gkreflexes, headingaccuracy, interceptions, jumping, longpassing, marking, penalties, positioning, potential, reactions, shortpassing, shotpower, slidingtackle, sprintspeed, standingtackle, stamina, strength, vision, volleys, weakfoot, atk_work_rate: .atkWorkRate, def_work_rate: .defWorkRate, player_type: .playerType, quality, color, is_gk: .isGK, position_full: .positionFull, is_special_type: .isSpecialType, contracts, fitness, raw_attribute_chemistry_bonus: .rawAttributeChemistyBonus, is_loan: .isLoan, squad_position: .squadPosition, icon_attributes: .iconAttributes, item_type: .itemType, discard_value: .discardValue, modelname, base_id: .baseId}' > temp
# Convert temporary JSON file to CSV
cat temp | json2csv -p -d ";" -k player_id,rating,name,common_name,first_name,last_name,position,composure,play_style,heigth,weight,birthdate,age,acceleration,aggression,agility,balance,ballcontrol,foot,skill_moves,crossing,curve,dribbling,finishing,freekickaccuracy,gkdiving,gkhandling,gkkicking,gkpositioning,gkreflexes,headingaccuracy,interceptions,jumping,longpassing,marking,penalties,positioning,potential,reactions,shortpassing,shotpower,slidingtackle,sprintspeed,standingtackle,stamina,strength,vision,volleys,weakfoot,atk_work_rate,def_work_rate,player_type,quality,color,is_gk,position_full,is_special_type,contracts,fitness,raw_attribute_chemistry_bonus,is_loan,squad_position,icon_attributes,item_type,discard_value,modelname,base_id > data/players.csv
rm temp